var Opentip,firstAdapter,i,mouseMoved,mousePosition,mousePositionObservers,position,vendors,_i,_len,_ref,__slice=[].slice,__indexOf=[].indexOf||function(n){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===n)return t;return-1},__hasProp={}.hasOwnProperty;for(Opentip=function(){function n(t,i,r,u){var l,w,a,v,e,s,h,c,b,k,d,y,p,f,o=this;if(this.id=++n.lastId,this.debug("Creating Opentip."),n.tips.push(this),this.adapter=n.adapter,l=this.adapter.data(t,"opentips")||[],l.push(this),this.adapter.data(t,"opentips",l),this.triggerElement=this.adapter.wrap(t),this.triggerElement.length>1)throw Error("You can't call Opentip on multiple elements.");if(1>this.triggerElement.length)throw Error("Invalid element.");for(this.loaded=!1,this.loading=!1,this.visible=!1,this.waitingToShow=!1,this.waitingToHide=!1,this.currentPosition={left:0,top:0},this.dimensions={width:100,height:50},this.content="",this.redraw=!0,this.currentObservers={showing:!1,visible:!1,hiding:!1,hidden:!1},u=this.adapter.clone(u),typeof i=="object"?(u=i,i=r=void 0):typeof r=="object"&&(u=r,r=void 0),r!=null&&(u.title=r),i!=null&&this.setContent(i),u["extends"]==null&&(u["extends"]=u.style!=null?u.style:n.defaultStyle),v=[u],f=u;f["extends"];){if(s=f["extends"],f=n.styles[s],f==null)throw Error("Invalid style: "+s);v.unshift(f);f["extends"]==null&&s!=="standard"&&(f["extends"]="standard")}for(u=(d=this.adapter).extend.apply(d,[{}].concat(__slice.call(v))),u.hideTriggers=function(){var n,r,t,i;for(t=u.hideTriggers,i=[],n=0,r=t.length;r>n;n++)w=t[n],i.push(w);return i}(),u.hideTrigger&&u.hideTriggers.length===0&&u.hideTriggers.push(u.hideTrigger),y=["tipJoint","targetJoint","stem"],h=0,b=y.length;b>h;h++)e=y[h],u[e]&&typeof u[e]=="string"&&(u[e]=new n.Joint(u[e]));for(!u.ajax||u.ajax!==!0&&u.ajax||(u.ajax=this.adapter.tagName(this.triggerElement)==="A"?this.adapter.attr(this.triggerElement,"href"):!1),u.showOn==="click"&&this.adapter.tagName(this.triggerElement)==="A"&&this.adapter.observe(this.triggerElement,"click",function(n){return n.preventDefault(),n.stopPropagation(),n.stopped=!0}),u.target&&(u.fixed=!0),u.stem===!0&&(u.stem=new n.Joint(u.tipJoint)),u.target===!0?u.target=this.triggerElement:u.target&&(u.target=this.adapter.wrap(u.target)),this.currentStem=u.stem,u.delay==null&&(u.delay=u.showOn==="mouseover"?.2:0),u.targetJoint==null&&(u.targetJoint=new n.Joint(u.tipJoint).flip()),this.showTriggers=[],this.showTriggersWhenVisible=[],this.hideTriggers=[],u.showOn&&u.showOn!=="creation"&&this.showTriggers.push({element:this.triggerElement,event:u.showOn}),u.ajaxCache!=null&&(u.cache=u.ajaxCache,delete u.ajaxCache),this.options=u,this.bound={},p=["prepareToShow","prepareToHide","show","hide","reposition"],c=0,k=p.length;k>c;c++)a=p[c],this.bound[a]=function(n){return function(){return o[n].apply(o,arguments)}}(a);this.adapter.domReady(function(){return o.activate(),o.options.showOn==="creation"?o.prepareToShow():void 0})}return n.prototype.STICKS_OUT_TOP=1,n.prototype.STICKS_OUT_BOTTOM=2,n.prototype.STICKS_OUT_LEFT=1,n.prototype.STICKS_OUT_RIGHT=2,n.prototype["class"]={container:"opentip-container",opentip:"opentip",header:"ot-header",content:"ot-content",loadingIndicator:"ot-loading-indicator",close:"ot-close",goingToHide:"ot-going-to-hide",hidden:"ot-hidden",hiding:"ot-hiding",goingToShow:"ot-going-to-show",showing:"ot-showing",visible:"ot-visible",loading:"ot-loading",ajaxError:"ot-ajax-error",fixed:"ot-fixed",showEffectPrefix:"ot-show-effect-",hideEffectPrefix:"ot-hide-effect-",stylePrefix:"style-"},n.prototype._setup=function(){var n,t,i,r,f,u,h,c,e,o,s;for(this.debug("Setting up the tooltip."),this._buildContainer(),this.hideTriggers=[],e=this.options.hideTriggers,r=f=0,h=e.length;h>f;r=++f){if(t=e[r],i=null,n=this.options.hideOn instanceof Array?this.options.hideOn[r]:this.options.hideOn,typeof t=="string")switch(t){case"trigger":n=n||"mouseout";i=this.triggerElement;break;case"tip":n=n||"mouseover";i=this.container;break;case"target":n=n||"mouseover";i=this.options.target;break;case"closeButton":break;default:throw Error("Unknown hide trigger: "+t+".");}else n=n||"mouseover",i=this.adapter.wrap(t);i&&this.hideTriggers.push({element:i,event:n,original:t})}for(o=this.hideTriggers,s=[],u=0,c=o.length;c>u;u++)t=o[u],s.push(this.showTriggersWhenVisible.push({element:t.element,event:"mouseover"}));return s},n.prototype._buildContainer=function(){return this.container=this.adapter.create('<div id="opentip-'+this.id+'" class="'+this["class"].container+" "+this["class"].hidden+" "+this["class"].stylePrefix+this.options.className+'"><\/div>'),this.adapter.css(this.container,{position:"absolute"}),this.options.ajax&&this.adapter.addClass(this.container,this["class"].loading),this.options.fixed&&this.adapter.addClass(this.container,this["class"].fixed),this.options.showEffect&&this.adapter.addClass(this.container,""+this["class"].showEffectPrefix+this.options.showEffect),this.options.hideEffect?this.adapter.addClass(this.container,""+this["class"].hideEffectPrefix+this.options.hideEffect):void 0},n.prototype._buildElements=function(){var n,t;return this.tooltipElement=this.adapter.create('<div class="'+this["class"].opentip+'"><div class="'+this["class"].header+'"><\/div><div class="'+this["class"].content+'"><\/div><\/div>'),this.backgroundCanvas=this.adapter.wrap(document.createElement("canvas")),this.adapter.css(this.backgroundCanvas,{position:"absolute"}),typeof G_vmlCanvasManager!="undefined"&&G_vmlCanvasManager!==null&&G_vmlCanvasManager.initElement(this.adapter.unwrap(this.backgroundCanvas)),n=this.adapter.find(this.tooltipElement,"."+this["class"].header),this.options.title&&(t=this.adapter.create("<h1><\/h1>"),this.adapter.update(t,this.options.title,this.options.escapeTitle),this.adapter.append(n,t)),this.options.ajax&&!this.loaded&&this.adapter.append(this.tooltipElement,this.adapter.create('<div class="'+this["class"].loadingIndicator+'"><span>â†»<\/span><\/div>')),__indexOf.call(this.options.hideTriggers,"closeButton")>=0&&(this.closeButtonElement=this.adapter.create('<a href="javascript:undefined;" class="'+this["class"].close+'"><span>Close<\/span><\/a>'),this.adapter.append(n,this.closeButtonElement)),this.adapter.append(this.container,this.backgroundCanvas),this.adapter.append(this.container,this.tooltipElement),this.adapter.append(document.body,this.container),this._newContent=!0,this.redraw=!0},n.prototype.setContent=function(n){return this.content=n,this._newContent=!0,typeof this.content=="function"?(this._contentFunction=this.content,this.content=""):this._contentFunction=null,this.visible?this._updateElementContent():void 0},n.prototype._updateElementContent=function(){var n;return(this._newContent||!this.options.cache&&this._contentFunction)&&(n=this.adapter.find(this.container,"."+this["class"].content),n!=null&&(this._contentFunction&&(this.debug("Executing content function."),this.content=this._contentFunction(this)),this.adapter.update(n,this.content,this.options.escapeContent)),this._newContent=!1),this._storeAndLockDimensions(),this.reposition()},n.prototype._storeAndLockDimensions=function(){var n;if(this.container)return n=this.dimensions,this.adapter.css(this.container,{width:"auto",left:"0px",top:"0px"}),this.dimensions=this.adapter.dimensions(this.container),this.dimensions.width+=1,this.adapter.css(this.container,{width:""+this.dimensions.width+"px",top:""+this.currentPosition.top+"px",left:""+this.currentPosition.left+"px"}),this._dimensionsEqual(this.dimensions,n)?void 0:(this.redraw=!0,this._draw())},n.prototype.activate=function(){return this._setupObservers("hidden","hiding")},n.prototype.deactivate=function(){return this.debug("Deactivating tooltip."),this.hide(),this._setupObservers("-showing","-visible","-hidden","-hiding")},n.prototype._setupObservers=function(){var i,r,t,s,n,u,f,e,o,a,v,y,p,h,c,l,w=this;for(s=arguments.length>=1?__slice.call(arguments,0):[],u=0,a=s.length;a>u;u++)if(t=s[u],r=!1,t.charAt(0)==="-"&&(r=!0,t=t.substr(1)),this.currentObservers[t]!==!r)switch(this.currentObservers[t]=!r,i=function(){var n,t,i;return n=arguments.length>=1?__slice.call(arguments,0):[],r?(t=w.adapter).stopObserving.apply(t,n):(i=w.adapter).observe.apply(i,n)},t){case"showing":for(h=this.hideTriggers,f=0,v=h.length;v>f;f++)n=h[f],i(n.element,n.event,this.bound.prepareToHide);i(document.onresize!=null?document:window,"resize",this.bound.reposition);i(window,"scroll",this.bound.reposition);break;case"visible":for(c=this.showTriggersWhenVisible,e=0,y=c.length;y>e;e++)n=c[e],i(n.element,n.event,this.bound.prepareToShow);break;case"hiding":for(l=this.showTriggers,o=0,p=l.length;p>o;o++)n=l[o],i(n.element,n.event,this.bound.prepareToShow);break;case"hidden":break;default:throw Error("Unknown state: "+t);}return null},n.prototype.prepareToShow=function(){return this._abortHiding(),this._abortShowing(),this.visible?void 0:(this.debug("Showing in "+this.options.delay+"s."),this.container==null&&this._setup(),this.options.group&&n._abortShowingGroup(this.options.group,this),this.preparingToShow=!0,this._setupObservers("-hidden","-hiding","showing"),this._followMousePosition(),this.options.fixed&&!this.options.target&&(this.initialMousePosition=mousePosition),this.reposition(),this._showTimeoutId=this.setTimeout(this.bound.show,this.options.delay||0))},n.prototype.show=function(){var t=this;return this._abortHiding(),this.visible?void 0:(this._clearTimeouts(),this._triggerElementExists()?(this.debug("Showing now."),this.container==null&&this._setup(),this.options.group&&n._hideGroup(this.options.group,this),this.visible=!0,this.preparingToShow=!1,this.tooltipElement==null&&this._buildElements(),this._updateElementContent(),!this.options.ajax||this.loaded&&this.options.cache||this._loadAjax(),this._searchAndActivateCloseButtons(),this._startEnsureTriggerElement(),this.adapter.css(this.container,{zIndex:n.lastZIndex++}),this._setupObservers("-hidden","-hiding","-showing","-visible","showing","visible"),this.options.fixed&&!this.options.target&&(this.initialMousePosition=mousePosition),this.reposition(),this.adapter.removeClass(this.container,this["class"].hiding),this.adapter.removeClass(this.container,this["class"].hidden),this.adapter.addClass(this.container,this["class"].goingToShow),this.setCss3Style(this.container,{transitionDuration:"0s"}),this.defer(function(){var n;if(t.visible&&!t.preparingToHide)return t.adapter.removeClass(t.container,t["class"].goingToShow),t.adapter.addClass(t.container,t["class"].showing),n=0,t.options.showEffect&&t.options.showEffectDuration&&(n=t.options.showEffectDuration),t.setCss3Style(t.container,{transitionDuration:""+n+"s"}),t._visibilityStateTimeoutId=t.setTimeout(function(){return t.adapter.removeClass(t.container,t["class"].showing),t.adapter.addClass(t.container,t["class"].visible)},n),t._activateFirstInput()}),this._draw()):this.deactivate())},n.prototype._abortShowing=function(){if(this.preparingToShow)return(this.debug("Aborting showing."),this._clearTimeouts(),this._stopFollowingMousePosition(),this.preparingToShow=!1,this._setupObservers("-showing","-visible","hiding","hidden"))},n.prototype.prepareToHide=function(){return this._abortShowing(),this._abortHiding(),this.visible?(this.debug("Hiding in "+this.options.hideDelay+"s"),this.preparingToHide=!0,this._setupObservers("-showing","visible","-hidden","hiding"),this._hideTimeoutId=this.setTimeout(this.bound.hide,this.options.hideDelay)):void 0},n.prototype.hide=function(){var n=this;return this._abortShowing(),this.visible&&(this._clearTimeouts(),this.debug("Hiding!"),this.visible=!1,this.preparingToHide=!1,this._stopEnsureTriggerElement(),this._setupObservers("-showing","-visible","-hiding","-hidden","hiding","hidden"),this.options.fixed||this._stopFollowingMousePosition(),this.container)?(this.adapter.removeClass(this.container,this["class"].visible),this.adapter.removeClass(this.container,this["class"].showing),this.adapter.addClass(this.container,this["class"].goingToHide),this.setCss3Style(this.container,{transitionDuration:"0s"}),this.defer(function(){var t;return n.adapter.removeClass(n.container,n["class"].goingToHide),n.adapter.addClass(n.container,n["class"].hiding),t=0,n.options.hideEffect&&n.options.hideEffectDuration&&(t=n.options.hideEffectDuration),n.setCss3Style(n.container,{transitionDuration:""+t+"s"}),n._visibilityStateTimeoutId=n.setTimeout(function(){return n.adapter.removeClass(n.container,n["class"].hiding),n.adapter.addClass(n.container,n["class"].hidden),n.setCss3Style(n.container,{transitionDuration:"0s"}),n.options.removeElementsOnHide?(n.debug("Removing HTML elements."),n.adapter.remove(n.container),delete n.container,delete n.tooltipElement):void 0},t)})):void 0},n.prototype._abortHiding=function(){if(this.preparingToHide)return(this.debug("Aborting hiding."),this._clearTimeouts(),this.preparingToHide=!1,this._setupObservers("-hiding","showing","visible"))},n.prototype.reposition=function(){var n,t,i,r=this;return n=this.getPosition(),n==null||(t=this.options.stem,this.options.containInViewport&&(i=this._ensureViewportContainment(n),n=i.position,t=i.stem),this._positionsEqual(n,this.currentPosition))?void 0:(this.options.stem&&!t.eql(this.currentStem)&&(this.redraw=!0),this.currentPosition=n,this.currentStem=t,this._draw(),this.adapter.css(this.container,{left:""+n.left+"px",top:""+n.top+"px"}),this.defer(function(){var n,t;return n=r.adapter.unwrap(r.container),n.style.visibility="hidden",t=n.offsetHeight,n.style.visibility="visible"}))},n.prototype.getPosition=function(n,t,i){var o,s,f,r,u,e,c,h,l;if(this.container)return n==null&&(n=this.options.tipJoint),t==null&&(t=this.options.targetJoint),r={},this.options.target?(c=this.adapter.offset(this.options.target),e=this.adapter.dimensions(this.options.target),r=c,t.right?(h=this.adapter.unwrap(this.options.target),h.getBoundingClientRect!=null?r.left=h.getBoundingClientRect().right+((l=window.pageXOffset)!=null?l:document.body.scrollLeft):r.left+=e.width):t.center&&(r.left+=Math.round(e.width/2)),t.bottom?r.top+=e.height:t.middle&&(r.top+=Math.round(e.height/2)),this.options.borderWidth&&(this.options.tipJoint.left&&(r.left+=this.options.borderWidth),this.options.tipJoint.right&&(r.left-=this.options.borderWidth),this.options.tipJoint.top?r.top+=this.options.borderWidth:this.options.tipJoint.bottom&&(r.top-=this.options.borderWidth))):r=this.initialMousePosition?{top:this.initialMousePosition.y,left:this.initialMousePosition.x}:{top:mousePosition.y,left:mousePosition.x},this.options.autoOffset&&(u=this.options.stem?this.options.stemLength:0,f=u&&this.options.fixed?2:10,o=n.middle&&!this.options.fixed?15:0,s=n.center&&!this.options.fixed?15:0,n.right?r.left-=f+o:n.left&&(r.left+=f+o),n.bottom?r.top-=f+s:n.top&&(r.top+=f+s),u&&(i==null&&(i=this.options.stem),i.right?r.left-=u:i.left&&(r.left+=u),i.bottom?r.top-=u:i.top&&(r.top+=u))),r.left+=this.options.offset[0],r.top+=this.options.offset[1],n.right?r.left-=this.dimensions.width:n.center&&(r.left-=Math.round(this.dimensions.width/2)),n.bottom?r.top-=this.dimensions.height:n.middle&&(r.top-=Math.round(this.dimensions.height/2)),r},n.prototype._ensureViewportContainment=function(t){var o,e,s,h,c,l,f,r,u,i,a,v;if((f=this.options.stem,s={position:t,stem:f},!this.visible||!t)||(r=this._sticksOut(t),!r[0]&&!r[1]))return s;if(i=new n.Joint(this.options.tipJoint),this.options.targetJoint&&(u=new n.Joint(this.options.targetJoint)),l=this.adapter.scrollOffset(),a=this.adapter.viewportDimensions(),v=[t.left-l[0],t.top-l[1]],o=!1,a.width>=this.dimensions.width&&r[0])switch(o=!0,r[0]){case this.STICKS_OUT_LEFT:i.setHorizontal("left");this.options.targetJoint&&u.setHorizontal("right");break;case this.STICKS_OUT_RIGHT:i.setHorizontal("right");this.options.targetJoint&&u.setHorizontal("left")}if(a.height>=this.dimensions.height&&r[1])switch(o=!0,r[1]){case this.STICKS_OUT_TOP:i.setVertical("top");this.options.targetJoint&&u.setVertical("bottom");break;case this.STICKS_OUT_BOTTOM:i.setVertical("bottom");this.options.targetJoint&&u.setVertical("top")}return o?(this.options.stem&&(f=i),t=this.getPosition(i,u,f),e=this._sticksOut(t),h=!1,c=!1,e[0]&&e[0]!==r[0]&&(h=!0,i.setHorizontal(this.options.tipJoint.horizontal),this.options.targetJoint&&u.setHorizontal(this.options.targetJoint.horizontal)),e[1]&&e[1]!==r[1]&&(c=!0,i.setVertical(this.options.tipJoint.vertical),this.options.targetJoint&&u.setVertical(this.options.targetJoint.vertical)),h&&c?s:((h||c)&&(this.options.stem&&(f=i),t=this.getPosition(i,u,f)),{position:t,stem:f})):s},n.prototype._sticksOut=function(n){var i,r,t,u;return r=this.adapter.scrollOffset(),u=this.adapter.viewportDimensions(),i=[n.left-r[0],n.top-r[1]],t=[!1,!1],0>i[0]?t[0]=this.STICKS_OUT_LEFT:i[0]+this.dimensions.width>u.width&&(t[0]=this.STICKS_OUT_RIGHT),0>i[1]?t[1]=this.STICKS_OUT_TOP:i[1]+this.dimensions.height>u.height&&(t[1]=this.STICKS_OUT_BOTTOM),t},n.prototype._draw=function(){var h,u,f,e,o,l,c,t,w,b,r,k,s,a,v,d,y,g,p,i=this;if(this.backgroundCanvas&&this.redraw){if(this.debug("Drawing background."),this.redraw=!1,this.currentStem){for(y=["top","right","bottom","left"],v=0,d=y.length;d>v;v++)k=y[v],this.adapter.removeClass(this.container,"stem-"+k);this.adapter.addClass(this.container,"stem-"+this.currentStem.horizontal);this.adapter.addClass(this.container,"stem-"+this.currentStem.vertical)}return l=[0,0],c=[0,0],__indexOf.call(this.options.hideTriggers,"closeButton")>=0&&(o=new n.Joint(((g=this.currentStem)!=null?g+"":void 0)==="top right"?"top left":"top right"),l=[this.options.closeButtonRadius+this.options.closeButtonOffset[0],this.options.closeButtonRadius+this.options.closeButtonOffset[1]],c=[this.options.closeButtonRadius-this.options.closeButtonOffset[0],this.options.closeButtonRadius-this.options.closeButtonOffset[1]]),f=this.adapter.clone(this.dimensions),e=[0,0],this.options.borderWidth&&(f.width+=this.options.borderWidth*2,f.height+=this.options.borderWidth*2,e[0]-=this.options.borderWidth,e[1]-=this.options.borderWidth),this.options.shadow&&(f.width+=this.options.shadowBlur*2,f.width+=Math.max(0,this.options.shadowOffset[0]-this.options.shadowBlur*2),f.height+=this.options.shadowBlur*2,f.height+=Math.max(0,this.options.shadowOffset[1]-this.options.shadowBlur*2),e[0]-=Math.max(0,this.options.shadowBlur-this.options.shadowOffset[0]),e[1]-=Math.max(0,this.options.shadowBlur-this.options.shadowOffset[1])),u={left:0,right:0,top:0,bottom:0},this.currentStem&&(this.currentStem.left?u.left=this.options.stemLength:this.currentStem.right&&(u.right=this.options.stemLength),this.currentStem.top?u.top=this.options.stemLength:this.currentStem.bottom&&(u.bottom=this.options.stemLength)),o&&(o.left?u.left=Math.max(u.left,c[0]):o.right&&(u.right=Math.max(u.right,c[0])),o.top?u.top=Math.max(u.top,c[1]):o.bottom&&(u.bottom=Math.max(u.bottom,c[1]))),f.width+=u.left+u.right,f.height+=u.top+u.bottom,e[0]-=u.left,e[1]-=u.top,this.currentStem&&this.options.borderWidth&&(p=this._getPathStemMeasures(this.options.stemBase,this.options.stemLength,this.options.borderWidth),a=p.stemLength,s=p.stemBase),h=this.adapter.unwrap(this.backgroundCanvas),h.width=f.width,h.height=f.height,this.adapter.css(this.backgroundCanvas,{width:""+h.width+"px",height:""+h.height+"px",left:""+e[0]+"px",top:""+e[1]+"px"}),t=h.getContext("2d"),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,h.width,h.height),t.beginPath(),t.fillStyle=this._getColor(t,this.dimensions,this.options.background,this.options.backgroundGradientHorizontal),t.lineJoin="miter",t.miterLimit=500,r=this.options.borderWidth/2,this.options.borderWidth?(t.strokeStyle=this.options.borderColor,t.lineWidth=this.options.borderWidth):(a=this.options.stemLength,s=this.options.stemBase),s==null&&(s=0),b=function(n,u,f){return f&&t.moveTo(Math.max(s,i.options.borderRadius,l[0])+1-r,-r),u?(t.lineTo(n/2-s/2,-r),t.lineTo(n/2,-a-r),t.lineTo(n/2+s/2,-r)):void 0},w=function(n,u,f){var h,c,o,e;return n?(t.lineTo(-s+r,0-r),t.lineTo(a+r,-a-r),t.lineTo(r,s-r)):u?(e=i.options.closeButtonOffset,o=l[0],f%2!=0&&(e=[e[1],e[0]],o=l[1]),h=Math.acos(e[1]/i.options.closeButtonRadius),c=Math.acos(e[0]/i.options.closeButtonRadius),t.lineTo(-o+r,-r),t.arc(r-e[0],-r+e[1],i.options.closeButtonRadius,-(Math.PI/2+h),c,!1)):(t.lineTo(-i.options.borderRadius+r,-r),t.quadraticCurveTo(r,-r,r,i.options.borderRadius-r))},t.translate(-e[0],-e[1]),t.save(),function(){var e,r,s,l,h,a,v,y,u,f,c;for(c=[],r=u=0,f=n.positions.length/2;f>=0?f>u:u>f;r=f>=0?++u:--u)h=r*2,a=r===0||r===3?0:i.dimensions.width,v=2>r?0:i.dimensions.height,y=Math.PI/2*r,s=r%2==0?i.dimensions.width:i.dimensions.height,l=new n.Joint(n.positions[h]),e=new n.Joint(n.positions[h+1]),t.save(),t.translate(a,v),t.rotate(y),b(s,l.eql(i.currentStem),r===0),t.translate(s,0),w(e.eql(i.currentStem),e.eql(o),r),c.push(t.restore());return c}(),t.closePath(),t.save(),this.options.shadow&&(t.shadowColor=this.options.shadowColor,t.shadowBlur=this.options.shadowBlur,t.shadowOffsetX=this.options.shadowOffset[0],t.shadowOffsetY=this.options.shadowOffset[1]),t.fill(),t.restore(),this.options.borderWidth&&t.stroke(),t.restore(),o?function(){var f,e,s,n,u;return s=e=i.options.closeButtonRadius*2,o+""=="top right"?(u=[i.dimensions.width-i.options.closeButtonOffset[0],i.options.closeButtonOffset[1]],f=[u[0]+r,u[1]-r]):(u=[i.options.closeButtonOffset[0],i.options.closeButtonOffset[1]],f=[u[0]-r,u[1]-r]),t.translate(f[0],f[1]),n=i.options.closeButtonCrossSize/2,t.save(),t.beginPath(),t.strokeStyle=i.options.closeButtonCrossColor,t.lineWidth=i.options.closeButtonCrossLineWidth,t.lineCap="round",t.moveTo(-n,-n),t.lineTo(n,n),t.stroke(),t.beginPath(),t.moveTo(n,-n),t.lineTo(-n,n),t.stroke(),t.restore(),i.adapter.css(i.closeButtonElement,{left:""+(u[0]-n-i.options.closeButtonLinkOverscan)+"px",top:""+(u[1]-n-i.options.closeButtonLinkOverscan)+"px",width:""+(i.options.closeButtonCrossSize+i.options.closeButtonLinkOverscan*2)+"px",height:""+(i.options.closeButtonCrossSize+i.options.closeButtonLinkOverscan*2)+"px"})}():void 0}},n.prototype._getPathStemMeasures=function(n,t,i){var e,o,r,f,s,h,u;if(f=i/2,r=Math.atan(n/2/t),e=r*2,s=f/Math.sin(e),o=2*s*Math.cos(r),u=f+t-o,0>u)throw Error("Sorry but your stemLength / stemBase ratio is strange.");return h=Math.tan(r)*u*2,{stemLength:u,stemBase:h}},n.prototype._getColor=function(n,t,i,r){var u,f,e,o,s;if(r==null&&(r=!1),typeof i=="string")return i;for(f=r?n.createLinearGradient(0,0,t.width,0):n.createLinearGradient(0,0,0,t.height),e=o=0,s=i.length;s>o;e=++o)u=i[e],f.addColorStop(u[0],u[1]);return f},n.prototype._searchAndActivateCloseButtons=function(){var i,n,r,t;for(t=this.adapter.findAll(this.container,"."+this["class"].close),n=0,r=t.length;r>n;n++)i=t[n],this.hideTriggers.push({element:this.adapter.wrap(i),event:"click"});return this.currentObservers.showing&&this._setupObservers("-showing","showing"),this.currentObservers.visible?this._setupObservers("-visible","visible"):void 0},n.prototype._activateFirstInput=function(){var n;return n=this.adapter.unwrap(this.adapter.find(this.container,"input, textarea")),n!=null?typeof n.focus=="function"?n.focus():void 0:void 0},n.prototype._followMousePosition=function(){if(!this.options.fixed)return n._observeMousePosition(this.bound.reposition)},n.prototype._stopFollowingMousePosition=function(){if(!this.options.fixed)return n._stopObservingMousePosition(this.bound.reposition)},n.prototype._clearShowTimeout=function(){return clearTimeout(this._showTimeoutId)},n.prototype._clearHideTimeout=function(){return clearTimeout(this._hideTimeoutId)},n.prototype._clearTimeouts=function(){return clearTimeout(this._visibilityStateTimeoutId),this._clearShowTimeout(),this._clearHideTimeout()},n.prototype._triggerElementExists=function(){for(var n=this.adapter.unwrap(this.triggerElement);n.parentNode;){if(n.parentNode.tagName==="BODY")return!0;n=n.parentNode}return!1},n.prototype._loadAjax=function(){var n=this;if(!this.loading)return this.loaded=!1,this.loading=!0,this.adapter.addClass(this.container,this["class"].loading),this.setContent(""),this.debug("Loading content from "+this.options.ajax),this.adapter.ajax({url:this.options.ajax,method:this.options.ajaxMethod,onSuccess:function(t){return n.debug("Loading successful."),n.adapter.removeClass(n.container,n["class"].loading),n.setContent(t)},onError:function(t){var i;return i=n.options.ajaxErrorMessage,n.debug(i,t),n.setContent(i),n.adapter.addClass(n.container,n["class"].ajaxError)},onComplete:function(){return n.adapter.removeClass(n.container,n["class"].loading),n.loading=!1,n.loaded=!0,n._searchAndActivateCloseButtons(),n._activateFirstInput(),n.reposition()}})},n.prototype._ensureTriggerElement=function(){if(!this._triggerElementExists())return(this.deactivate(),this._stopEnsureTriggerElement())},n.prototype._ensureTriggerElementInterval=1e3,n.prototype._startEnsureTriggerElement=function(){var n=this;return this._ensureTriggerElementTimeoutId=setInterval(function(){return n._ensureTriggerElement()},this._ensureTriggerElementInterval)},n.prototype._stopEnsureTriggerElement=function(){return clearInterval(this._ensureTriggerElementTimeoutId)},n}(),vendors=["khtml","ms","o","moz","webkit"],Opentip.prototype.setCss3Style=function(n,t){var i,u,e,f,r;n=this.adapter.unwrap(n);r=[];for(i in t)__hasProp.call(t,i)&&(u=t[i],n.style[i]!=null?r.push(n.style[i]=u):r.push(function(){var t,o,r;for(r=[],t=0,o=vendors.length;o>t;t++)e=vendors[t],f=""+this.ucfirst(e)+this.ucfirst(i),n.style[f]!=null?r.push(n.style[f]=u):r.push(void 0);return r}.call(this)));return r},Opentip.prototype.defer=function(n){return setTimeout(n,0)},Opentip.prototype.setTimeout=function(n,t){return setTimeout(n,t?t*1e3:0)},Opentip.prototype.ucfirst=function(n){return n==null?"":n.charAt(0).toUpperCase()+n.slice(1)},Opentip.prototype.dasherize=function(n){return n.replace(/([A-Z])/g,function(n,t){return"-"+t.toLowerCase()})},mousePositionObservers=[],mousePosition={x:0,y:0},mouseMoved=function(n){var r,t,u,i;for(mousePosition=Opentip.adapter.mousePosition(n),i=[],t=0,u=mousePositionObservers.length;u>t;t++)r=mousePositionObservers[t],i.push(r());return i},Opentip.followMousePosition=function(){return Opentip.adapter.observe(document.body,"mousemove",mouseMoved)},Opentip._observeMousePosition=function(n){return mousePositionObservers.push(n)},Opentip._stopObservingMousePosition=function(n){var t;return mousePositionObservers=function(){var i,u,r;for(r=[],i=0,u=mousePositionObservers.length;u>i;i++)t=mousePositionObservers[i],t!==n&&r.push(t);return r}()},Opentip.Joint=function(){function n(n){n!=null&&(n instanceof Opentip.Joint&&(n+=""),this.set(n))}return n.prototype.set=function(n){return n=n.toLowerCase(),this.setHorizontal(n),this.setVertical(n),this},n.prototype.setHorizontal=function(n){var t,i,r,u,e,o,f;for(i=["left","center","right"],r=0,e=i.length;e>r;r++)t=i[r],~n.indexOf(t)&&(this.horizontal=t.toLowerCase());for(this.horizontal==null&&(this.horizontal="center"),f=[],u=0,o=i.length;o>u;u++)t=i[u],f.push(this[t]=this.horizontal===t?t:void 0);return f},n.prototype.setVertical=function(n){var t,i,r,u,e,o,f;for(i=["top","middle","bottom"],r=0,e=i.length;e>r;r++)t=i[r],~n.indexOf(t)&&(this.vertical=t.toLowerCase());for(this.vertical==null&&(this.vertical="middle"),f=[],u=0,o=i.length;o>u;u++)t=i[u],f.push(this[t]=this.vertical===t?t:void 0);return f},n.prototype.eql=function(n){return n!=null&&this.horizontal===n.horizontal&&this.vertical===n.vertical},n.prototype.flip=function(){var n,t;return t=Opentip.position[this.toString(!0)],n=(t+4)%8,this.set(Opentip.positions[n]),this},n.prototype.toString=function(n){var t,i;return n==null&&(n=!1),i=this.vertical==="middle"?"":this.vertical,t=this.horizontal==="center"?"":this.horizontal,i&&t&&(t=n?Opentip.prototype.ucfirst(t):" "+t),""+i+t},n}(),Opentip.prototype._positionsEqual=function(n,t){return n!=null&&t!=null&&n.left===t.left&&n.top===t.top},Opentip.prototype._dimensionsEqual=function(n,t){return n!=null&&t!=null&&n.width===t.width&&n.height===t.height},Opentip.prototype.debug=function(){var n;return n=arguments.length>=1?__slice.call(arguments,0):[],Opentip.debug&&(typeof console!="undefined"&&console!==null?console.debug:void 0)!=null?(n.unshift("#"+this.id+" |"),console.debug.apply(console,n)):void 0},Opentip.findElements=function(){var i,t,r,f,n,e,u,h,o,s;for(i=Opentip.adapter,o=i.findAll(document.body,"[data-ot]"),s=[],u=0,h=o.length;h>u;u++){r=o[u];e={};t=i.data(r,"ot");(t===""||t==="true"||t==="yes")&&(t=i.attr(r,"title"),i.attr(r,"title",""));t=t||"";for(f in Opentip.styles.standard)n=i.data(r,"ot"+Opentip.prototype.ucfirst(f)),n!=null&&(n==="yes"||n==="true"||n==="on"?n=!0:(n==="no"||n==="false"||n==="off")&&(n=!1),e[f]=n);s.push(new Opentip(r,t,e))}return s},Opentip.version="2.4.6",Opentip.debug=!1,Opentip.lastId=0,Opentip.lastZIndex=100,Opentip.tips=[],Opentip._abortShowingGroup=function(n,t){var i,r,e,f,u;for(f=Opentip.tips,u=[],r=0,e=f.length;e>r;r++)i=f[r],i!==t&&i.options.group===n?u.push(i._abortShowing()):u.push(void 0);return u},Opentip._hideGroup=function(n,t){var i,r,e,f,u;for(f=Opentip.tips,u=[],r=0,e=f.length;e>r;r++)i=f[r],i!==t&&i.options.group===n?u.push(i.hide()):u.push(void 0);return u},Opentip.adapters={},Opentip.adapter=null,firstAdapter=!0,Opentip.addAdapter=function(n){return Opentip.adapters[n.name]=n,firstAdapter?(Opentip.adapter=n,n.domReady(Opentip.findElements),n.domReady(Opentip.followMousePosition),firstAdapter=!1):void 0},Opentip.positions=["top","topRight","right","bottomRight","bottom","bottomLeft","left","topLeft"],Opentip.position={},_ref=Opentip.positions,i=_i=0,_len=_ref.length;_len>_i;i=++_i)position=_ref[i],Opentip.position[position]=i;Opentip.styles={standard:{"extends":null,title:void 0,escapeTitle:!0,escapeContent:!1,className:"standard",stem:!0,delay:null,hideDelay:.1,fixed:!1,showOn:"mouseover",hideTrigger:"trigger",hideTriggers:[],hideOn:null,removeElementsOnHide:!1,offset:[0,0],containInViewport:!0,autoOffset:!0,showEffect:"appear",hideEffect:"fade",showEffectDuration:.3,hideEffectDuration:.2,stemLength:5,stemBase:8,tipJoint:"top left",target:null,targetJoint:null,cache:!0,ajax:!1,ajaxMethod:"GET",ajaxErrorMessage:"There was a problem downloading the content.",group:null,style:null,background:"#fff18f",backgroundGradientHorizontal:!1,closeButtonOffset:[5,5],closeButtonRadius:7,closeButtonCrossSize:4,closeButtonCrossColor:"#d2c35b",closeButtonCrossLineWidth:1.5,closeButtonLinkOverscan:6,borderRadius:5,borderWidth:1,borderColor:"#f2e37b",shadow:!0,shadowBlur:10,shadowOffset:[3,3],shadowColor:"rgba(0, 0, 0, 0.1)"},glass:{"extends":"standard",className:"glass",background:[[0,"rgba(252, 252, 252, 0.8)"],[.5,"rgba(255, 255, 255, 0.8)"],[.5,"rgba(250, 250, 250, 0.9)"],[1,"rgba(245, 245, 245, 0.9)"]],borderColor:"#eee",closeButtonCrossColor:"rgba(0, 0, 0, 0.2)",borderRadius:15,closeButtonRadius:10,closeButtonOffset:[8,8]},dark:{"extends":"standard",className:"dark",borderRadius:13,borderColor:"#444",closeButtonCrossColor:"rgba(240, 240, 240, 1)",shadowColor:"rgba(0, 0, 0, 0.3)",shadowOffset:[2,2],background:[[0,"rgba(30, 30, 30, 0.7)"],[.5,"rgba(30, 30, 30, 0.8)"],[.5,"rgba(10, 10, 10, 0.8)"],[1,"rgba(10, 10, 10, 0.9)"]]},alert:{"extends":"standard",className:"alert",borderRadius:1,borderColor:"#AE0D11",closeButtonCrossColor:"rgba(255, 255, 255, 1)",shadowColor:"rgba(0, 0, 0, 0.3)",shadowOffset:[2,2],background:[[0,"rgba(203, 15, 19, 0.7)"],[.5,"rgba(203, 15, 19, 0.8)"],[.5,"rgba(189, 14, 18, 0.8)"],[1,"rgba(179, 14, 17, 0.9)"]]}};Opentip.defaultStyle="standard";typeof module!="undefined"&&module!==null?module.exports=Opentip:window.Opentip=Opentip;__slice=[].slice,function(n){var t;return n.fn.opentip=function(n,t,i){return new Opentip(this,n,t,i)},t=function(){function t(){}return t.prototype.name="jquery",t.prototype.domReady=function(t){return n(t)},t.prototype.create=function(t){return n(t)},t.prototype.wrap=function(t){if(t=n(t),t.length>1)throw Error("Multiple elements provided.");return t},t.prototype.unwrap=function(t){return n(t)[0]},t.prototype.tagName=function(n){return this.unwrap(n).tagName},t.prototype.attr=function(){var t,i,r;return i=arguments[0],t=arguments.length>=2?__slice.call(arguments,1):[],(r=n(i)).attr.apply(r,t)},t.prototype.data=function(){var t,i,r;return i=arguments[0],t=arguments.length>=2?__slice.call(arguments,1):[],(r=n(i)).data.apply(r,t)},t.prototype.find=function(t,i){return n(t).find(i).get(0)},t.prototype.findAll=function(t,i){return n(t).find(i)},t.prototype.update=function(t,i,r){return t=n(t),r?t.text(i):t.html(i)},t.prototype.append=function(t,i){return n(t).append(i)},t.prototype.remove=function(t){return n(t).remove()},t.prototype.addClass=function(t,i){return n(t).addClass(i)},t.prototype.removeClass=function(t,i){return n(t).removeClass(i)},t.prototype.css=function(t,i){return n(t).css(i)},t.prototype.dimensions=function(t){return{width:n(t).outerWidth(),height:n(t).outerHeight()}},t.prototype.scrollOffset=function(){return[window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop]},t.prototype.viewportDimensions=function(){return{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}},t.prototype.mousePosition=function(n){return n==null?null:{x:n.pageX,y:n.pageY}},t.prototype.offset=function(t){var i;return i=n(t).offset(),{left:i.left,top:i.top}},t.prototype.observe=function(t,i,r){return n(t).bind(i,r)},t.prototype.stopObserving=function(t,i,r){return n(t).unbind(i,r)},t.prototype.ajax=function(t){var i,r;if(t.url==null)throw Error("No url provided");return n.ajax({url:t.url,type:(i=(r=t.method)!=null?r.toUpperCase():void 0)!=null?i:"GET"}).done(function(n){if(typeof t.onSuccess=="function")return t.onSuccess(n)}).fail(function(n){if(typeof t.onError=="function")return t.onError("Server responded with status "+n.status)}).always(function(){if(typeof t.onComplete=="function")return t.onComplete()})},t.prototype.clone=function(t){return n.extend({},t)},t.prototype.extend=function(){var t,i;return i=arguments[0],t=arguments.length>=2?__slice.call(arguments,1):[],n.extend.apply(n,[i].concat(__slice.call(t)))},t}(),Opentip.addAdapter(new t)}(jQuery);document.createElement("canvas").getContext||function(){function nt(){return this.context_||(this.context_=new l(this))}function tt(n,t){var i=d.call(arguments,2);return function(){return n.apply(t,i.concat(d.call(arguments)))}}function it(n){var t=n.srcElement;switch(n.propertyName){case"width":t.style.width=t.attributes.width.nodeValue+"px";t.getContext().clearRect();break;case"height":t.style.height=t.attributes.height.nodeValue+"px";t.getContext().clearRect()}}function rt(n){var t=n.srcElement;t.firstChild&&(t.firstChild.style.width=t.clientWidth+"px",t.firstChild.style.height=t.clientHeight+"px")}function c(){return[[1,0,0],[0,1,0],[0,0,1]]}function f(n,t){for(var r,e,u,f=c(),i=0;3>i;i++)for(r=0;3>r;r++){for(e=0,u=0;3>u;u++)e+=n[i][u]*t[u][r];f[i][r]=e}return f}function p(n,t){t.fillStyle=n.fillStyle;t.lineCap=n.lineCap;t.lineJoin=n.lineJoin;t.lineWidth=n.lineWidth;t.miterLimit=n.miterLimit;t.shadowBlur=n.shadowBlur;t.shadowColor=n.shadowColor;t.shadowOffsetX=n.shadowOffsetX;t.shadowOffsetY=n.shadowOffsetY;t.strokeStyle=n.strokeStyle;t.globalAlpha=n.globalAlpha;t.arcScaleX_=n.arcScaleX_;t.arcScaleY_=n.arcScaleY_;t.lineScale_=n.lineScale_}function w(n){var t,u=1,i;if(n+="",n.substring(0,3)=="rgb"){var f=n.indexOf("(",3),e=n.indexOf(")",f+1),r=n.substring(f+1,e).split(",");for(t="#",i=0;3>i;i++)t+=y[Number(r[i])];r.length==4&&n.substr(3,1)=="a"&&(u=r[3])}else t=n;return{color:t,alpha:u}}function ut(n){switch(n){case"butt":return"flat";case"round":return"round";case"square":default:return"square"}}function l(n){this.m_=c();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.strokeStyle="#000";this.fillStyle="#000";this.lineWidth=1;this.lineJoin="miter";this.lineCap="butt";this.miterLimit=i*1;this.globalAlpha=1;this.canvas=n;var t=n.ownerDocument.createElement("div");t.style.width=n.clientWidth+"px";t.style.height=n.clientHeight+"px";t.style.position="absolute";n.appendChild(t);this.element_=t;this.arcScaleX_=1;this.arcScaleY_=1;this.lineScale_=1}function b(n,t,i,r){n.currentPath_.push({type:"bezierCurveTo",cp1x:t.x,cp1y:t.y,cp2x:i.x,cp2y:i.y,x:r.x,y:r.y});n.currentX_=r.x;n.currentY_=r.y}function ft(n){for(var i,t=0;3>t;t++)for(i=0;2>i;i++)if(!isFinite(n[t][i])||isNaN(n[t][i]))return!1;return!0}function e(n,t,i){if(ft(t)&&(n.m_=t,i)){var r=t[0][0]*t[1][1]-t[0][1]*t[1][0];n.lineScale_=ot(et(r))}}function h(n){this.type_=n;this.x0_=0;this.y0_=0;this.r0_=0;this.x1_=0;this.y1_=0;this.r1_=0;this.colors_=[]}function k(){}var r=Math,t=r.round,a=r.sin,v=r.cos,et=r.abs,ot=r.sqrt,i=10,u=i/2,d=Array.prototype.slice,g={init:function(n){if(/MSIE/.test(navigator.userAgent)&&!window.opera){var t=n||document;t.createElement("canvas");t.attachEvent("onreadystatechange",tt(this.init_,this,t))}},init_:function(n){var i,r,t;for((n.namespaces.g_vml_||n.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML"),n.namespaces.g_o_||n.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML"),n.styleSheets.ex_canvas_)||(i=n.createStyleSheet(),i.owningElement.id="ex_canvas_",i.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}g_vml_\\:*{behavior:url(#default#VML)}g_o_\\:*{behavior:url(#default#VML)}"),r=n.getElementsByTagName("canvas"),t=0;r.length>t;t++)this.initElement(r[t])},initElement:function(n){if(!n.getContext){n.getContext=nt;n.innerHTML="";n.attachEvent("onpropertychange",it);n.attachEvent("onresize",rt);var t=n.attributes;t.width&&t.width.specified?n.style.width=t.width.nodeValue+"px":n.width=n.clientWidth;t.height&&t.height.specified?n.style.height=t.height.nodeValue+"px":n.height=n.clientHeight}return n}},y,o,s,n;for(g.init(),y=[],o=0;16>o;o++)for(s=0;16>s;s++)y[o*16+s]=o.toString(16)+s.toString(16);n=l.prototype;n.clearRect=function(){this.element_.innerHTML=""};n.beginPath=function(){this.currentPath_=[]};n.moveTo=function(n,t){var i=this.getCoords_(n,t);this.currentPath_.push({type:"moveTo",x:i.x,y:i.y});this.currentX_=i.x;this.currentY_=i.y};n.lineTo=function(n,t){var i=this.getCoords_(n,t);this.currentPath_.push({type:"lineTo",x:i.x,y:i.y});this.currentX_=i.x;this.currentY_=i.y};n.bezierCurveTo=function(n,t,i,r,u,f){var e=this.getCoords_(u,f),o=this.getCoords_(n,t),s=this.getCoords_(i,r);b(this,o,s,e)};n.quadraticCurveTo=function(n,t,i,r){var e=this.getCoords_(n,t),u=this.getCoords_(i,r),f={x:this.currentX_+2/3*(e.x-this.currentX_),y:this.currentY_+2/3*(e.y-this.currentY_)},o={x:f.x+(u.x-this.currentX_)/3,y:f.y+(u.y-this.currentY_)/3};b(this,f,o,u)};n.arc=function(n,t,r,f,e,o){r*=i;var p=o?"at":"wa",s=n+v(f)*r-u,w=t+a(f)*r-u,h=n+v(e)*r-u,b=t+a(e)*r-u;s!=h||o||(s+=.125);var c=this.getCoords_(n,t),l=this.getCoords_(s,w),y=this.getCoords_(h,b);this.currentPath_.push({type:p,x:c.x,y:c.y,radius:r,xStart:l.x,yStart:l.y,xEnd:y.x,yEnd:y.y})};n.rect=function(n,t,i,r){this.moveTo(n,t);this.lineTo(n+i,t);this.lineTo(n+i,t+r);this.lineTo(n,t+r);this.closePath()};n.strokeRect=function(n,t,i,r){var u=this.currentPath_;this.beginPath();this.moveTo(n,t);this.lineTo(n+i,t);this.lineTo(n+i,t+r);this.lineTo(n,t+r);this.closePath();this.stroke();this.currentPath_=u};n.fillRect=function(n,t,i,r){var u=this.currentPath_;this.beginPath();this.moveTo(n,t);this.lineTo(n+i,t);this.lineTo(n+i,t+r);this.lineTo(n,t+r);this.closePath();this.fill();this.currentPath_=u};n.createLinearGradient=function(n,t,i,r){var u=new h("gradient");return u.x0_=n,u.y0_=t,u.x1_=i,u.y1_=r,u};n.createRadialGradient=function(n,t,i,r,u,f){var e=new h("gradientradial");return e.x0_=n,e.y0_=t,e.r0_=i,e.x1_=r,e.y1_=u,e.r1_=f,e};n.drawImage=function(n){var u,f,e,o,l,a,p,w,it=n.runtimeStyle.width,rt=n.runtimeStyle.height,s,h,b;if(n.runtimeStyle.width="auto",n.runtimeStyle.height="auto",s=n.width,h=n.height,n.runtimeStyle.width=it,n.runtimeStyle.height=rt,arguments.length==3)u=arguments[1],f=arguments[2],l=a=0,p=e=s,w=o=h;else if(arguments.length==5)u=arguments[1],f=arguments[2],e=arguments[3],o=arguments[4],l=a=0,p=s,w=h;else{if(arguments.length!=9)throw Error("Invalid number of arguments");l=arguments[1];a=arguments[2];p=arguments[3];w=arguments[4];u=arguments[5];f=arguments[6];e=arguments[7];o=arguments[8]}var v=this.getCoords_(u,f),y=[],k=10,d=10;if(y.push(" <g_vml_:group",' coordsize="',i*k,",",i*d,'"',' coordorigin="0,0"',' style="width:',k,"px;height:",d,"px;position:absolute;"),this.m_[0][0]!=1||this.m_[0][1]){b=[];b.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",t(v.x/i),",","Dy=",t(v.y/i),"");var c=v,g=this.getCoords_(u+e,f),nt=this.getCoords_(u,f+o),tt=this.getCoords_(u+e,f+o);c.x=r.max(c.x,g.x,nt.x,tt.x);c.y=r.max(c.y,g.y,nt.y,tt.y);y.push("padding:0 ",t(c.x/i),"px ",t(c.y/i),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",b.join(""),", sizingmethod='clip');")}else y.push("top:",t(v.y/i),"px;left:",t(v.x/i),"px;");y.push(' ">','<g_vml_:image src="',n.src,'"',' style="width:',i*e,"px;"," height:",i*o,'px;"',' cropleft="',l/s,'"',' croptop="',a/h,'"',' cropright="',(s-l-p)/s,'"',' cropbottom="',(h-a-w)/h,'"'," />","<\/g_vml_:group>");this.element_.insertAdjacentHTML("BeforeEnd",y.join(""))};n.stroke=function(n){var f=[],it=w(n?this.fillStyle:this.strokeStyle),rt=it.color,y=it.alpha*this.globalAlpha,ft=10,et=10,ct,u,g,h,tt,v;f.push("<g_vml_:shape",' filled="',!!n,'"',' style="position:absolute;width:',ft,"px;height:",et,'px;"',' coordorigin="0 0" coordsize="',i*ft," ",i*et,'"',' stroked="',!n,'"',' path="');for(var o={x:null,y:null},s={x:null,y:null},c=0;this.currentPath_.length>c;c++){u=this.currentPath_[c];switch(u.type){case"moveTo":ct=u;f.push(" m ",t(u.x),",",t(u.y));break;case"lineTo":f.push(" l ",t(u.x),",",t(u.y));break;case"close":f.push(" x ");u=null;break;case"bezierCurveTo":f.push(" c ",t(u.cp1x),",",t(u.cp1y),",",t(u.cp2x),",",t(u.cp2y),",",t(u.x),",",t(u.y));break;case"at":case"wa":f.push(" ",u.type," ",t(u.x-this.arcScaleX_*u.radius),",",t(u.y-this.arcScaleY_*u.radius)," ",t(u.x+this.arcScaleX_*u.radius),",",t(u.y+this.arcScaleY_*u.radius)," ",t(u.xStart),",",t(u.yStart)," ",t(u.xEnd),",",t(u.yEnd))}u&&((o.x==null||o.x>u.x)&&(o.x=u.x),(s.x==null||u.x>s.x)&&(s.x=u.x),(o.y==null||o.y>u.y)&&(o.y=u.y),(s.y==null||u.y>s.y)&&(s.y=u.y))}if(f.push(' ">'),n)if(typeof this.fillStyle=="object"){var e=this.fillStyle,l=0,p={x:0,y:0},b=0,ot=1;if(e.type_=="gradient"){var lt=e.x0_/this.arcScaleX_,at=e.y0_/this.arcScaleY_,vt=e.x1_/this.arcScaleX_,yt=e.y1_/this.arcScaleY_,a=this.getCoords_(lt,at),st=this.getCoords_(vt,yt),pt=st.x-a.x,wt=st.y-a.y;l=Math.atan2(pt,wt)*180/Math.PI;0>l&&(l+=360);1e-6>l&&(l=0)}else{var a=this.getCoords_(e.x0_,e.y0_),k=s.x-o.x,d=s.y-o.y;p={x:(a.x-o.x)/k,y:(a.y-o.y)/d};k/=this.arcScaleX_*i;d/=this.arcScaleY_*i;g=r.max(k,d);b=2*e.r0_/g;ot=2*e.r1_/g-b}h=e.colors_;h.sort(function(n,t){return n.offset-t.offset});for(var nt=h.length,bt=h[0].color,kt=h[nt-1].color,dt=h[0].alpha*this.globalAlpha,gt=h[nt-1].alpha*this.globalAlpha,ht=[],c=0;nt>c;c++)tt=h[c],ht.push(tt.offset*ot+b+" "+tt.color);f.push('<g_vml_:fill type="',e.type_,'"',' method="none" focus="100%"',' color="',bt,'"',' color2="',kt,'"',' colors="',ht.join(","),'"',' opacity="',gt,'"',' g_o_:opacity2="',dt,'"',' angle="',l,'"',' focusposition="',p.x,",",p.y,'" />')}else f.push('<g_vml_:fill color="',rt,'" opacity="',y,'" />');else v=this.lineScale_*this.lineWidth,1>v&&(y*=v),f.push("<g_vml_:stroke",' opacity="',y,'"',' joinstyle="',this.lineJoin,'"',' miterlimit="',this.miterLimit,'"',' endcap="',ut(this.lineCap),'"',' weight="',v,'px"',' color="',rt,'" />');f.push("<\/g_vml_:shape>");this.element_.insertAdjacentHTML("beforeEnd",f.join(""))};n.fill=function(){this.stroke(!0)};n.closePath=function(){this.currentPath_.push({type:"close"})};n.getCoords_=function(n,t){var r=this.m_;return{x:i*(n*r[0][0]+t*r[1][0]+r[2][0])-u,y:i*(n*r[0][1]+t*r[1][1]+r[2][1])-u}};n.save=function(){var n={};p(this,n);this.aStack_.push(n);this.mStack_.push(this.m_);this.m_=f(c(),this.m_)};n.restore=function(){p(this.aStack_.pop(),this);this.m_=this.mStack_.pop()};n.translate=function(n,t){var i=[[1,0,0],[0,1,0],[n,t,1]];e(this,f(i,this.m_),!1)};n.rotate=function(n){var t=v(n),i=a(n),r=[[t,i,0],[-i,t,0],[0,0,1]];e(this,f(r,this.m_),!1)};n.scale=function(n,t){this.arcScaleX_*=n;this.arcScaleY_*=t;var i=[[n,0,0],[0,t,0],[0,0,1]];e(this,f(i,this.m_),!0)};n.transform=function(n,t,i,r,u,o){var s=[[n,t,0],[i,r,0],[u,o,1]];e(this,f(s,this.m_),!0)};n.setTransform=function(n,t,i,r,u,f){var o=[[n,t,0],[i,r,0],[u,f,1]];e(this,o,!0)};n.clip=function(){};n.arcTo=function(){};n.createPattern=function(){return new k};h.prototype.addColorStop=function(n,t){t=w(t);this.colors_.push({offset:n,color:t.color,alpha:t.alpha})};G_vmlCanvasManager=g;CanvasRenderingContext2D=l;CanvasGradient=h;CanvasPattern=k}()